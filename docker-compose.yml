# version: '3.8'

services:
  robot-test:
    build: .
    volumes:
      - ./results:/app/results
    
    # # ✅ FIX 1: Thêm env_file để auto-load từ file được chỉ định
    # env_file:
    #   - ${ENV_FILE:-.env}  # Default to .env if ENV_FILE not set
    
    # ✅ FIX 2: Truyền tất cả variables cần thiết
    environment:
      - BASE_URL=${BASE_URL}
      - BROWSER=${BROWSER}
      - HEADLESS=${HEADLESS}
      - ENVIRONMENT=${ENVIRONMENT}
    
    # ✅ FIX 3: Thêm shm-size cho Chrome stability
    shm_size: '2gb'
    
    # ✅ FIX 4: Network mode nếu cần truy cập localhost
    # network_mode: "host"  # Uncomment if needed